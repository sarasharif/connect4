{"version":3,"sources":["webpack/bootstrap 57782d4577584a2b3999","./js/main.js","./js/view.js","./js/game.js","./js/board.js","./js/moveError.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;ACPD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,OAAM;AACN;AACA;AACA;AACA,OAAM;;AAEN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,IAAG;AACH;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yBAAwB,YAAY;AACpC;AACA;AACA,6BAA4B,YAAY;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;;;;;;ACnJA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC7BA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,OAAO;AACxB;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uBAAsB,YAAY;AAClC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mBAAkB,aAAa;AAC/B,2CAA0C,OAAO;AACjD;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAwB,gCAAgC;AACxD;AACA;AACA,yBAAwB,YAAY;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC3LA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 57782d4577584a2b3999\n **/","var View = require('./view');\nvar Game = require('./game');\n\n$(function () {\n  var containerEl = $('.connect4');\n  var game = new Game();\n  new View(game, containerEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var Game = require(\"./game\");\n\nvar View = function (game, $el) {\n  this.game = game;\n  this.$el = $el;\n\n  this.setupBoard();\n  this.bindEvents();\n};\n\nView.prototype.bindEvents = function () {\n  this.$el.on(\"click\", \"li\", (function (clicker) {\n    var $col = $(clicker.currentTarget).parent();\n    this.makeMove($col);\n\n  }).bind(this));\n};\n\nView.prototype.bindResetEvent = function (winner) {\n  this.$el.on(\"click\", \"li\", (function (clicker) {\n    this.resetGame(winner);\n  }).bind(this));\n\n  // this.$el.on(\"click\", \"ul\", (function (clicker) {\n  //   this.resetGame();\n  // }).bind(this));\n  //\n  // this.$el.on(\"click\", \"h1\", (function (clicker) {\n  //   this.resetGame();\n  // }).bind(this));\n\n};\n\nView.prototype.resetGame = function(winner) {\n  this.$el.removeClass(\"winner-\" + winner);\n  this.$el.prev().removeClass(\"winner-\" + winner);\n  this.$el.children(\"div\").remove();\n  winner = null;\n  this.$el.off(\"click\");\n  this.game = new Game();\n  this.setupBoard();\n  this.bindEvents();\n};\n\n\nView.prototype.makeMove = function ($col) {\n  var col = $col.attr(\"col\");\n  var currentPlayer = this.game.currentPlayer;\n\n  try {\n    this.game.playMove(col);\n  } catch (e) {\n    return;\n  }\n\n  this.finishMove($col, \"human\", currentPlayer);\n\n};\n\nView.prototype.makeAImove = function () {\n  // this.$el.off(\"click\");\n\n\n  var col = Math.floor(Math.random() * 7);\n  var currentPlayer = this.game.currentPlayer;\n  var $col = $(\"ul[col='\"+ col +\"']\");\n\n  try {\n    this.game.playMove(col);\n  } catch (e) {\n    this.makeAImove();\n  }\n\n  this.finishMove($col, \"computer\", currentPlayer);\n};\n\nView.prototype.finishMove = function ($col, user, currentPlayer) {\n  var $slots = $col.find(\"li.empty\");\n  this.dropToken($slots, currentPlayer);\n\n  if (this.game.isOver()) {\n    this.$el.off(\"click\");\n\n    var winner = this.game.winner()[0];\n    var winSeq = this.game.winner()[1];\n\n    if (winner) {\n      this.$el.addClass(\"winner-\" + winner);\n      this.$el.prev().addClass(\"winner-\" + winner);\n\n      $(\"li[pos='\"+ winSeq[0] +\"']\").addClass(\"winners\");\n      $(\"li[pos='\"+ winSeq[1] +\"']\").addClass(\"winners\");\n      $(\"li[pos='\"+ winSeq[2] +\"']\").addClass(\"winners\");\n      $(\"li[pos='\"+ winSeq[3] +\"']\").addClass(\"winners\");\n    }\n\n    this.bindResetEvent(winner);\n\n  } else {\n    if (user === \"human\") {\n      setTimeout(this.makeAImove.bind(this), 700);\n    } else {\n      return;\n      // setTimeout(this.bindEvents.bind(this), 500);\n    }\n  }\n\n};\n\n\nView.prototype.dropToken = function ($slots, currentPlayer) {\n  var $currentSlot = $slots.first();\n  $currentSlot.removeClass(\"empty\").addClass(currentPlayer);\n  setTimeout(this.dropAnimation.bind(this, $currentSlot, currentPlayer), 45);\n\n  $slots.last().addClass(\"animated bounce\");\n};\n\nView.prototype.dropAnimation = function ($currentSlot, currentPlayer) {\n  if ($currentSlot.next(\"li\").hasClass(\"empty\")) {\n    $currentSlot.removeClass(currentPlayer).addClass(\"empty\");\n    $currentSlot  = $currentSlot.next(\"li\");\n    $currentSlot.removeClass(\"empty\").addClass(currentPlayer);\n    setTimeout(this.dropAnimation.bind(this, $currentSlot, currentPlayer), 45);\n  }\n};\n\nView.prototype.setupBoard = function () {\n\n  var $div = $(\"<div>\");\n  $div.addClass(\"board\");\n    for (var colIdx = 0; colIdx < 7; colIdx++) {\n      var $ul = $(\"<ul>\");\n      $ul.attr(\"col\", colIdx);\n        for (var rowIdx = 0; rowIdx < 6; rowIdx++) {\n          var $li = $(\"<li>\");\n          $li.attr(\"pos\", [colIdx, rowIdx]);\n          $li.addClass(\"empty\");\n          $ul.append($li);\n        }\n      $div.append($ul);\n    }\n    this.$el.append($div);\n};\n\n\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Board = require(\"./board\");\nvar MoveError = require(\"./moveError\");\n\nfunction Game () {\n  this.board = new Board();\n  this.currentPlayer = Board.tokens[0];\n}\n\nGame.prototype.isOver = function () {\n  return this.board.isOver();\n};\n\nGame.prototype.playMove = function (col) {\n  this.board.dropToken(col, this.currentPlayer);\n  this.swapTurn();\n};\n\nGame.prototype.swapTurn = function () {\n  if (this.currentPlayer === Board.tokens[0]) {\n    this.currentPlayer = Board.tokens[1];\n  } else {\n    this.currentPlayer = Board.tokens[0];\n  }\n};\n\nGame.prototype.winner = function () {\n  return this.board.winner();\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/game.js\n ** module id = 2\n ** module chunks = 0\n **/","var MoveError = require(\"./moveError\");\n\nfunction Board () {\n  this.grid = Board.makeGrid();\n}\n\nBoard.makeGrid = function () {\n  var grid = [];\n\n  for (var i = 0; i < 7; i++) {\n    grid.push([]);\n    for (var j = 0; j < 6; j++) {\n      grid[i].push(null);\n    }\n  }\n\n  return grid;\n};\n\nBoard.tokens = [\"red\", \"blue\"];\n\nBoard.isValidCol = function (col) {\n  return (\n    (col >= 0 & col < 7)\n  );\n};\n\nBoard.prototype.isEmptyCol = function (col) {\n  if (!Board.isValidCol(col)) {\n    throw new MoveError(\"Not a valid move!\");\n  }\n\n  return (this.grid[col][0] === null);\n};\n\nBoard.prototype.isOver = function () {\n  if (this.winner() !== null) {\n    return true;\n  }\n\n  for (var colIdx = 0; colIdx < 7; colIdx++) {\n    if (this.isEmptyCol(colIdx)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nBoard.prototype.dropToken = function (col, token) {\n\n  if (!this.isEmptyCol(col)) {\n    throw new MoveError(\"Not an empty column!\");\n  }\n\n  for (rowIdx = 5; rowIdx >= 0; rowIdx--) {\n    if (this.grid[col][rowIdx] === null) { break; }\n  }\n\n  this.grid[col][rowIdx] = token;\n};\n\n\nBoard.prototype.winner = function () {\n\n  var posSeqs = [\n    // horizontals\n    [[0, 0], [0, 1], [0, 2], [0, 3]],\n    [[1, 0], [1, 1], [1, 2], [1, 3]],\n    [[2, 0], [2, 1], [2, 2], [2, 3]],\n    [[3, 0], [3, 1], [3, 2], [3, 3]],\n    [[4, 0], [4, 1], [4, 2], [4, 3]],\n    [[5, 0], [5, 1], [5, 2], [5, 3]],\n    [[6, 0], [6, 1], [6, 2], [6, 3]],\n\n    [[0, 1], [0, 2], [0, 3], [0, 4]],\n    [[1, 1], [1, 2], [1, 3], [1, 4]],\n    [[2, 1], [2, 2], [2, 3], [2, 4]],\n    [[3, 1], [3, 2], [3, 3], [3, 4]],\n    [[4, 1], [4, 2], [4, 3], [4, 4]],\n    [[5, 1], [5, 2], [5, 3], [5, 4]],\n    [[6, 1], [6, 2], [6, 3], [6, 4]],\n\n    [[0, 2], [0, 3], [0, 4], [0, 5]],\n    [[1, 2], [1, 3], [1, 4], [1, 5]],\n    [[2, 2], [2, 3], [2, 4], [2, 5]],\n    [[3, 2], [3, 3], [3, 4], [3, 5]],\n    [[4, 2], [4, 3], [4, 4], [4, 5]],\n    [[5, 2], [5, 3], [5, 4], [5, 5]],\n    [[6, 2], [6, 3], [6, 4], [6, 5]],\n    // verticals\n    [[0, 0], [1, 0], [2, 0], [3, 0]],\n    [[1, 0], [2, 0], [3, 0], [4, 0]],\n    [[2, 0], [3, 0], [4, 0], [5, 0]],\n    [[3, 0], [4, 0], [5, 0], [6, 0]],\n\n    [[0, 1], [1, 1], [2, 1], [3, 1]],\n    [[1, 1], [2, 1], [3, 1], [4, 1]],\n    [[2, 1], [3, 1], [4, 1], [5, 1]],\n    [[3, 1], [4, 1], [5, 1], [6, 1]],\n\n    [[0, 2], [1, 2], [2, 2], [3, 2]],\n    [[1, 2], [2, 2], [3, 2], [4, 2]],\n    [[2, 2], [3, 2], [4, 2], [5, 2]],\n    [[3, 2], [4, 2], [5, 2], [6, 2]],\n\n    [[0, 3], [1, 3], [2, 3], [3, 3]],\n    [[1, 3], [2, 3], [3, 3], [4, 3]],\n    [[2, 3], [3, 3], [4, 3], [5, 3]],\n    [[3, 3], [4, 3], [5, 3], [6, 3]],\n\n    [[0, 4], [1, 4], [2, 4], [3, 4]],\n    [[1, 4], [2, 4], [3, 4], [4, 4]],\n    [[2, 4], [3, 4], [4, 4], [5, 4]],\n    [[3, 4], [4, 4], [5, 4], [6, 4]],\n\n    [[0, 5], [1, 5], [2, 5], [3, 5]],\n    [[1, 5], [2, 5], [3, 5], [4, 5]],\n    [[2, 5], [3, 5], [4, 5], [5, 5]],\n    [[3, 5], [4, 5], [5, 5], [6, 5]],\n    // diagonals\n    [[0, 0], [1, 1], [2, 2], [3, 3]],\n    [[1, 1], [2, 2], [3, 3], [4, 4]],\n    [[2, 2], [3, 3], [4, 4], [5, 5]],\n    [[1, 0], [2, 1], [3, 2], [4, 3]],\n    [[2, 1], [3, 2], [4, 3], [5, 4]],\n    [[3, 2], [4, 3], [5, 4], [6, 5]],\n\n    [[6, 0], [5, 1], [4, 2], [3, 3]],\n    [[5, 1], [4, 2], [3, 3], [2, 4]],\n    [[4, 2], [3, 3], [2, 4], [1, 5]],\n    [[5, 0], [4, 1], [3, 2], [2, 3]],\n    [[4, 1], [3, 2], [2, 3], [1, 4]],\n    [[3, 2], [2, 3], [1, 4], [0, 5]],\n\n    [[2, 0], [3, 1], [4, 2], [5, 3]],\n    [[3, 1], [4, 2], [5, 3], [6, 4]],\n    [[3, 0], [4, 1], [5, 2], [6, 3]],\n\n    [[4, 0], [3, 1], [2, 2], [1, 3]],\n    [[3, 1], [2, 2], [1, 3], [0, 4]],\n    [[3, 0], [2, 1], [1, 2], [0, 3]],\n\n    [[0, 1], [1, 2], [2, 3], [3, 4]],\n    [[1, 2], [2, 3], [3, 4], [4, 5]],\n    [[0, 2], [1, 3], [2, 4], [3, 5]],\n\n    [[2, 5], [3, 4], [4, 3], [5, 2]],\n    [[3, 4], [4, 3], [5, 2], [6, 1]],\n    [[3, 5], [4, 4], [5, 3], [6, 2]],\n\n\n  ];\n\n    for (var i = 0; i < posSeqs.length; i++) {\n      var winner = this.winnerHelper(posSeqs[i]);\n      if (winner !== null) {\n        winSeq = posSeqs[i].map(function(tuple) {\n          return tuple.toString();\n        });\n        return [winner, winSeq];\n      }\n    }\n  return null;\n};\n\nBoard.prototype.winnerHelper = function (posSeq) {\n  for (var tokenIdx = 0; tokenIdx < Board.tokens.length; tokenIdx++) {\n    var targetToken = Board.tokens[tokenIdx];\n    var winner = true;\n    for (var posIdx = 0; posIdx < 4; posIdx++) {\n      var pos = posSeq[posIdx];\n      var token = this.grid[pos[0]][pos[1]];\n\n      if (token !== targetToken) {\n        winner = false;\n      }\n    }\n\n    if (winner) {\n      return targetToken;\n    }\n  }\n\n  return null;\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 3\n ** module chunks = 0\n **/","function MoveError (msg) {\n  this.msg = msg;\n}\n\nmodule.exports = MoveError;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/moveError.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}